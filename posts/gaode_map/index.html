<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="高德地图API使用" /><meta name="author" content="Narule" /><meta property="og:locale" content="en_US" /><meta name="description" content="高德地图使用 api地址 https://lbs.amap.com/api/javascript-api/summary 高德地图有提供公共接口，查看api，能实现一些项目基本需求效果 基本使用 注册帐号 使用高德api，首先需要注册帐号，并且申请key(以个人或者公司的名字)，获取key后才能使用高德地图API去使用开发地图相关功能 高德地图使用，省图显示，路线规划，行车轨迹 行车路线规划 已行驶轨迹绘制 monitor.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta http-equiv=&#39;X-UA-Compatible&#39; content=&#39;IE=edge&#39;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no, width=device-width&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css&quot;/&gt; &lt;style&gt; html, body, #container { width: 100%; height: 100%; margin: 0; } &lt;/style&gt; &lt;title&gt;车辆配送行程监控&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div style=&quot;width: 800px;height: 800px; position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%);&quot;&gt; &lt;div id=&quot;container&quot;&gt;&lt;/div&gt; &lt;div class=&quot;input-card&quot;&gt; &lt;h4&gt;选择省份&lt;/h4&gt; &lt;select name=&quot;code-list&quot; id=&quot;adcode-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeAdcode(this.value)&quot;&gt; &lt;option value=&quot;-1&quot;&gt;选择省份&lt;/option&gt; &lt;/select&gt; &lt;h4&gt;选择层级&lt;/h4&gt; &lt;select name=&quot;code-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeDepth(this.value)&quot;&gt; &lt;option value=&quot;0&quot;&gt;0 - 显示省级&lt;/option&gt; &lt;option selected value=&quot;1&quot;&gt;1 - 显示市级&lt;/option&gt; &lt;option value=&quot;2&quot;&gt;2 - 显示区/县级&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;https://webapi.amap.com/maps?v=1.4.15&amp;key=你申请的key&amp;plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.TruckDriving&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://a.amap.com/Loca/static/mock/adcodes.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./js/monitor_map.js&quot;&gt;&lt;/script&gt; &lt;script&gt; &lt;/script&gt; &lt;script&gt; // 构造下拉框 var optArr = adcodes.map(function (item) { if (item.adcode == 100000) { item.name = &#39;选择省份&#39;; } if(item.adcode == 440000 || item.adcode == 450000 || item.adcode == 530000 || item.adcode == 520000 || item.adcode == 460000) { return &#39;&lt;option &#39; + (item.adcode == adCode ? &#39;selected&#39; : &#39;&#39;) + &#39; value=&quot;&#39; + item.adcode + &#39;&quot;&gt;&#39; + item.name + &#39;&lt;/option&gt;&#39;; } //item.adCode == 360000 ||江西 }); document.getElementById(&#39;adcode-list&#39;).innerHTML = optArr.join(&#39;&#39;); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; monitor_map.js 内容：自定义地图js API使用示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 //首先或一个地图（对象） var adCode = 440000; var depth = 1; var map = new AMap.Map(&quot;container&quot;, { resizeEnable: true, zoom: 7, center: [113.23333, 23.26667], pitch: 0, viewMode: &#39;3D&#39;, }); // 创建省份图层 var disProvince; function initPro(code, dep) { dep = typeof dep == &#39;undefined&#39; ? 2 : dep; adCode = code; depth = dep; disProvince &amp;&amp; disProvince.setMap(null); disProvince = new AMap.DistrictLayer.Province({ zIndex: 12, adcode: [code], depth: dep, styles: { &#39;fill&#39;: function (properties) { // properties为可用于做样式映射的字段，包含 // NAME_CHN:中文名称 // adcode_pro // adcode_cit // adcode var adcode = properties.adcode; return getColorByAdcode(adcode); }, &#39;province-stroke&#39;: &#39;cornflowerblue&#39;, &#39;city-stroke&#39;: &#39;white&#39;, // 中国地级市边界 &#39;county-stroke&#39;: &#39;rgba(255,255,255,0.5)&#39; // 中国区县边界 } }); disProvince.setMap(map); } // 颜色辅助方法 var colors = {}; var getColorByAdcode = function (adcode) { if (!colors[adcode]) { var gb = Math.random() * 155 + 50; colors[adcode] = &#39;rgba(&#39; + gb + &#39;,&#39; + gb + &#39;,255,0.45)&#39;; } return colors[adcode]; }; // 五省中心经纬度 var centerMapLng = new Map(); var centerMapLat = new Map(); //lng; //经度 //lat; //纬度 centerMapLng.set(&quot;530000&quot;,102.72); centerMapLat.set(&quot;530000&quot;,25.05); centerMapLng.set(&quot;440000&quot;,113.23333); centerMapLat.set(&quot;440000&quot;,23.26667); centerMapLng.set(&quot;520000&quot;,106.63); centerMapLat.set(&quot;520000&quot;,26.65); centerMapLng.set(&quot;450000&quot;,108.22); centerMapLat.set(&quot;450000&quot;,22.48); centerMapLng.set(&quot;460000&quot;,110.32); centerMapLat.set(&quot;460000&quot;,20.03); // 按钮事件 function changeAdcode(code) { if (code != 100000) { initPro(code, depth); setCenter(code); } } function setCenter(code){ var lng = centerMapLng.get(code); var lat = centerMapLat.get(code) map.setCenter([lng,lat]); } function changeDepth(dep) { initPro(adCode, dep); } initPro(adCode, depth); //设置地图显示范围 var mybounds = new AMap.Bounds([73, 4], [135,53]); // 设置经纬度边界 [西南经纬度,东北经纬度] //map.setBounds(mybounds); //会将地图放大 map.setLimitBounds(mybounds); // 路线规划，需要有起点和重点经纬度 //起点latitude: &quot;23.167439&quot; longitude: &quot;113.46625&quot; //latitude: &quot;23.00637&quot; longitude: &quot;113.124749&quot; 终点 佛山医院 var truckDriving = new AMap.TruckDriving({ policy: 0, // 规划策略 size: 1, // 车型大小 width: 2.5, // 宽度 height: 2, // 高度 load: 1, // 载重 weight: 12, // 自重 axlesNum: 2, // 轴数 province: &#39;京&#39;, // 车辆牌照省份 }) var path = [] path.push({lnglat:[113.46625, 23.167439]});//起点 //path.push({lnglat:[113.324749, 23.107439]});//途径 path.push({lnglat:[113.124749, 23.00637]});//终点 truckDriving.search(path, function(status, result) { // result即是对应的货车导航信息，相关数据结构文档请参考 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult if (status === &#39;complete&#39;) { //log.success(&#39;绘制货车路线完成&#39;) if (result.routes &amp;&amp; result.routes.length) { drawRoute(result.routes[0]) } } else { //log.error(&#39;获取货车规划数据失败：&#39; + result) } }) // 画路线 function drawRoute (route) { var path = parseRouteToPath(route) var startMarker = new AMap.Marker({ position: path[0], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/start.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var endMarker = new AMap.Marker({ position: path[path.length - 1], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/end.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var routeLine = new AMap.Polyline({ path: path, isOutline: true, outlineColor: &#39;#ffeeee&#39;, borderWeight: 2, strokeWeight: 5, strokeOpacity: 0.9, strokeColor: &#39;#0091ff&#39;, lineJoin: &#39;round&#39; }) map.add(routeLine); // 调整视野达到最佳显示区域 map.setFitView([ startMarker, endMarker, routeLine ]) // drawPath(); map.setZoom(8); } // 解析DrivingRoute对象，构造成AMap.Polyline的path参数需要的格式 // DrivingResult对象结构参考文档 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DriveRoute function parseRouteToPath(route) { var path = [] for (var i = 0, l = route.steps.length; i &lt; l; i++) { var step = route.steps[i] for (var j = 0, n = step.path.length; j &lt; n; j++) { path.push(step.path[j]) } } return path } // 路线规划好后，画出已行驶路线 //轨迹演示 /*; 113.466393,23.16349;113.466124,23.163199;113.466024,23.163116;113.465586,23.162886;113.465469,23.162873;113.465334,23.162869;113.464753,23.162865;113.464288,23.162878;113.463902,23.162912;113.462956,23.163025;113.461311,23.16322;113.460981,23.16326;113.460326,23.163342;113.460104,23.163368;113.458754,23.163628;113.457943,23.163759;113.457465,23.163811;113.457331,23.163828;113.456879,23.163889;113.456059,23.163984 */ var marker, lineArr = [ [113.465972,23.167452], [113.465964,23.167335], [113.465968,23.167174], [113.465924,23.166984], [113.465556,23.165217], [113.465707,23.165074], [113.465777,23.165048], [113.466662,23.164813], [113.466662,23.164813], [113.466632,23.164683], [113.466576,23.164375], [113.466428,23.163689], [113.466393,23.16349], [113.466393,23.16349], [113.466124,23.163199], [113.465586,23.162886], [113.465334,23.162869], [113.464753,23.162865], [113.463902,23.162912] ]; marker = new AMap.Marker({ map: map, position: [113.464753,23.162865], icon: &quot;https://webapi.amap.com/images/car.png&quot;, offset: new AMap.Pixel(-26, -13), autoRotation: true, angle:-90, }); function drawPath(){ // 绘制轨迹 var polyline = new AMap.Polyline({ map: map, path: lineArr, showDir:true, strokeColor: &quot;#AF5&quot;,//&quot;#28F&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); var passedPolyline = new AMap.Polyline({ map: map, // path: lineArr, strokeColor: &quot;#AF5&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); marker.on(&#39;moving&#39;, function (e) { passedPolyline.setPath(e.passedPath); }); map.setFitView(); marker.moveAlong([lineArr[lineArr.length-2],lineArr[lineArr.length-1]], 200); } 记录一次开发试用记录，学习请看官网API，描写详细清晰" /><meta property="og:description" content="高德地图使用 api地址 https://lbs.amap.com/api/javascript-api/summary 高德地图有提供公共接口，查看api，能实现一些项目基本需求效果 基本使用 注册帐号 使用高德api，首先需要注册帐号，并且申请key(以个人或者公司的名字)，获取key后才能使用高德地图API去使用开发地图相关功能 高德地图使用，省图显示，路线规划，行车轨迹 行车路线规划 已行驶轨迹绘制 monitor.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta http-equiv=&#39;X-UA-Compatible&#39; content=&#39;IE=edge&#39;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no, width=device-width&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css&quot;/&gt; &lt;style&gt; html, body, #container { width: 100%; height: 100%; margin: 0; } &lt;/style&gt; &lt;title&gt;车辆配送行程监控&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div style=&quot;width: 800px;height: 800px; position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%);&quot;&gt; &lt;div id=&quot;container&quot;&gt;&lt;/div&gt; &lt;div class=&quot;input-card&quot;&gt; &lt;h4&gt;选择省份&lt;/h4&gt; &lt;select name=&quot;code-list&quot; id=&quot;adcode-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeAdcode(this.value)&quot;&gt; &lt;option value=&quot;-1&quot;&gt;选择省份&lt;/option&gt; &lt;/select&gt; &lt;h4&gt;选择层级&lt;/h4&gt; &lt;select name=&quot;code-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeDepth(this.value)&quot;&gt; &lt;option value=&quot;0&quot;&gt;0 - 显示省级&lt;/option&gt; &lt;option selected value=&quot;1&quot;&gt;1 - 显示市级&lt;/option&gt; &lt;option value=&quot;2&quot;&gt;2 - 显示区/县级&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;https://webapi.amap.com/maps?v=1.4.15&amp;key=你申请的key&amp;plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.TruckDriving&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://a.amap.com/Loca/static/mock/adcodes.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./js/monitor_map.js&quot;&gt;&lt;/script&gt; &lt;script&gt; &lt;/script&gt; &lt;script&gt; // 构造下拉框 var optArr = adcodes.map(function (item) { if (item.adcode == 100000) { item.name = &#39;选择省份&#39;; } if(item.adcode == 440000 || item.adcode == 450000 || item.adcode == 530000 || item.adcode == 520000 || item.adcode == 460000) { return &#39;&lt;option &#39; + (item.adcode == adCode ? &#39;selected&#39; : &#39;&#39;) + &#39; value=&quot;&#39; + item.adcode + &#39;&quot;&gt;&#39; + item.name + &#39;&lt;/option&gt;&#39;; } //item.adCode == 360000 ||江西 }); document.getElementById(&#39;adcode-list&#39;).innerHTML = optArr.join(&#39;&#39;); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; monitor_map.js 内容：自定义地图js API使用示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 //首先或一个地图（对象） var adCode = 440000; var depth = 1; var map = new AMap.Map(&quot;container&quot;, { resizeEnable: true, zoom: 7, center: [113.23333, 23.26667], pitch: 0, viewMode: &#39;3D&#39;, }); // 创建省份图层 var disProvince; function initPro(code, dep) { dep = typeof dep == &#39;undefined&#39; ? 2 : dep; adCode = code; depth = dep; disProvince &amp;&amp; disProvince.setMap(null); disProvince = new AMap.DistrictLayer.Province({ zIndex: 12, adcode: [code], depth: dep, styles: { &#39;fill&#39;: function (properties) { // properties为可用于做样式映射的字段，包含 // NAME_CHN:中文名称 // adcode_pro // adcode_cit // adcode var adcode = properties.adcode; return getColorByAdcode(adcode); }, &#39;province-stroke&#39;: &#39;cornflowerblue&#39;, &#39;city-stroke&#39;: &#39;white&#39;, // 中国地级市边界 &#39;county-stroke&#39;: &#39;rgba(255,255,255,0.5)&#39; // 中国区县边界 } }); disProvince.setMap(map); } // 颜色辅助方法 var colors = {}; var getColorByAdcode = function (adcode) { if (!colors[adcode]) { var gb = Math.random() * 155 + 50; colors[adcode] = &#39;rgba(&#39; + gb + &#39;,&#39; + gb + &#39;,255,0.45)&#39;; } return colors[adcode]; }; // 五省中心经纬度 var centerMapLng = new Map(); var centerMapLat = new Map(); //lng; //经度 //lat; //纬度 centerMapLng.set(&quot;530000&quot;,102.72); centerMapLat.set(&quot;530000&quot;,25.05); centerMapLng.set(&quot;440000&quot;,113.23333); centerMapLat.set(&quot;440000&quot;,23.26667); centerMapLng.set(&quot;520000&quot;,106.63); centerMapLat.set(&quot;520000&quot;,26.65); centerMapLng.set(&quot;450000&quot;,108.22); centerMapLat.set(&quot;450000&quot;,22.48); centerMapLng.set(&quot;460000&quot;,110.32); centerMapLat.set(&quot;460000&quot;,20.03); // 按钮事件 function changeAdcode(code) { if (code != 100000) { initPro(code, depth); setCenter(code); } } function setCenter(code){ var lng = centerMapLng.get(code); var lat = centerMapLat.get(code) map.setCenter([lng,lat]); } function changeDepth(dep) { initPro(adCode, dep); } initPro(adCode, depth); //设置地图显示范围 var mybounds = new AMap.Bounds([73, 4], [135,53]); // 设置经纬度边界 [西南经纬度,东北经纬度] //map.setBounds(mybounds); //会将地图放大 map.setLimitBounds(mybounds); // 路线规划，需要有起点和重点经纬度 //起点latitude: &quot;23.167439&quot; longitude: &quot;113.46625&quot; //latitude: &quot;23.00637&quot; longitude: &quot;113.124749&quot; 终点 佛山医院 var truckDriving = new AMap.TruckDriving({ policy: 0, // 规划策略 size: 1, // 车型大小 width: 2.5, // 宽度 height: 2, // 高度 load: 1, // 载重 weight: 12, // 自重 axlesNum: 2, // 轴数 province: &#39;京&#39;, // 车辆牌照省份 }) var path = [] path.push({lnglat:[113.46625, 23.167439]});//起点 //path.push({lnglat:[113.324749, 23.107439]});//途径 path.push({lnglat:[113.124749, 23.00637]});//终点 truckDriving.search(path, function(status, result) { // result即是对应的货车导航信息，相关数据结构文档请参考 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult if (status === &#39;complete&#39;) { //log.success(&#39;绘制货车路线完成&#39;) if (result.routes &amp;&amp; result.routes.length) { drawRoute(result.routes[0]) } } else { //log.error(&#39;获取货车规划数据失败：&#39; + result) } }) // 画路线 function drawRoute (route) { var path = parseRouteToPath(route) var startMarker = new AMap.Marker({ position: path[0], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/start.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var endMarker = new AMap.Marker({ position: path[path.length - 1], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/end.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var routeLine = new AMap.Polyline({ path: path, isOutline: true, outlineColor: &#39;#ffeeee&#39;, borderWeight: 2, strokeWeight: 5, strokeOpacity: 0.9, strokeColor: &#39;#0091ff&#39;, lineJoin: &#39;round&#39; }) map.add(routeLine); // 调整视野达到最佳显示区域 map.setFitView([ startMarker, endMarker, routeLine ]) // drawPath(); map.setZoom(8); } // 解析DrivingRoute对象，构造成AMap.Polyline的path参数需要的格式 // DrivingResult对象结构参考文档 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DriveRoute function parseRouteToPath(route) { var path = [] for (var i = 0, l = route.steps.length; i &lt; l; i++) { var step = route.steps[i] for (var j = 0, n = step.path.length; j &lt; n; j++) { path.push(step.path[j]) } } return path } // 路线规划好后，画出已行驶路线 //轨迹演示 /*; 113.466393,23.16349;113.466124,23.163199;113.466024,23.163116;113.465586,23.162886;113.465469,23.162873;113.465334,23.162869;113.464753,23.162865;113.464288,23.162878;113.463902,23.162912;113.462956,23.163025;113.461311,23.16322;113.460981,23.16326;113.460326,23.163342;113.460104,23.163368;113.458754,23.163628;113.457943,23.163759;113.457465,23.163811;113.457331,23.163828;113.456879,23.163889;113.456059,23.163984 */ var marker, lineArr = [ [113.465972,23.167452], [113.465964,23.167335], [113.465968,23.167174], [113.465924,23.166984], [113.465556,23.165217], [113.465707,23.165074], [113.465777,23.165048], [113.466662,23.164813], [113.466662,23.164813], [113.466632,23.164683], [113.466576,23.164375], [113.466428,23.163689], [113.466393,23.16349], [113.466393,23.16349], [113.466124,23.163199], [113.465586,23.162886], [113.465334,23.162869], [113.464753,23.162865], [113.463902,23.162912] ]; marker = new AMap.Marker({ map: map, position: [113.464753,23.162865], icon: &quot;https://webapi.amap.com/images/car.png&quot;, offset: new AMap.Pixel(-26, -13), autoRotation: true, angle:-90, }); function drawPath(){ // 绘制轨迹 var polyline = new AMap.Polyline({ map: map, path: lineArr, showDir:true, strokeColor: &quot;#AF5&quot;,//&quot;#28F&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); var passedPolyline = new AMap.Polyline({ map: map, // path: lineArr, strokeColor: &quot;#AF5&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); marker.on(&#39;moving&#39;, function (e) { passedPolyline.setPath(e.passedPath); }); map.setFitView(); marker.moveAlong([lineArr[lineArr.length-2],lineArr[lineArr.length-1]], 200); } 记录一次开发试用记录，学习请看官网API，描写详细清晰" /><link rel="canonical" href="https://narule.github.io/posts/gaode_map/" /><meta property="og:url" content="https://narule.github.io/posts/gaode_map/" /><meta property="og:site_name" content="Narule" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-19T19:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="高德地图API使用" /><meta name="twitter:site" content="@no_twitter" /><meta name="twitter:creator" content="@Narule" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"高德地图使用 api地址 https://lbs.amap.com/api/javascript-api/summary 高德地图有提供公共接口，查看api，能实现一些项目基本需求效果 基本使用 注册帐号 使用高德api，首先需要注册帐号，并且申请key(以个人或者公司的名字)，获取key后才能使用高德地图API去使用开发地图相关功能 高德地图使用，省图显示，路线规划，行车轨迹 行车路线规划 已行驶轨迹绘制 monitor.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta http-equiv=&#39;X-UA-Compatible&#39; content=&#39;IE=edge&#39;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no, width=device-width&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css&quot;/&gt; &lt;style&gt; html, body, #container { width: 100%; height: 100%; margin: 0; } &lt;/style&gt; &lt;title&gt;车辆配送行程监控&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div style=&quot;width: 800px;height: 800px; position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%);&quot;&gt; &lt;div id=&quot;container&quot;&gt;&lt;/div&gt; &lt;div class=&quot;input-card&quot;&gt; &lt;h4&gt;选择省份&lt;/h4&gt; &lt;select name=&quot;code-list&quot; id=&quot;adcode-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeAdcode(this.value)&quot;&gt; &lt;option value=&quot;-1&quot;&gt;选择省份&lt;/option&gt; &lt;/select&gt; &lt;h4&gt;选择层级&lt;/h4&gt; &lt;select name=&quot;code-list&quot; style=&quot;height: 28px;margin-right: 10px;&quot; onchange=&quot;changeDepth(this.value)&quot;&gt; &lt;option value=&quot;0&quot;&gt;0 - 显示省级&lt;/option&gt; &lt;option selected value=&quot;1&quot;&gt;1 - 显示市级&lt;/option&gt; &lt;option value=&quot;2&quot;&gt;2 - 显示区/县级&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;https://webapi.amap.com/maps?v=1.4.15&amp;key=你申请的key&amp;plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.TruckDriving&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://a.amap.com/Loca/static/mock/adcodes.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./js/monitor_map.js&quot;&gt;&lt;/script&gt; &lt;script&gt; &lt;/script&gt; &lt;script&gt; // 构造下拉框 var optArr = adcodes.map(function (item) { if (item.adcode == 100000) { item.name = &#39;选择省份&#39;; } if(item.adcode == 440000 || item.adcode == 450000 || item.adcode == 530000 || item.adcode == 520000 || item.adcode == 460000) { return &#39;&lt;option &#39; + (item.adcode == adCode ? &#39;selected&#39; : &#39;&#39;) + &#39; value=&quot;&#39; + item.adcode + &#39;&quot;&gt;&#39; + item.name + &#39;&lt;/option&gt;&#39;; } //item.adCode == 360000 ||江西 }); document.getElementById(&#39;adcode-list&#39;).innerHTML = optArr.join(&#39;&#39;); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; monitor_map.js 内容：自定义地图js API使用示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 //首先或一个地图（对象） var adCode = 440000; var depth = 1; var map = new AMap.Map(&quot;container&quot;, { resizeEnable: true, zoom: 7, center: [113.23333, 23.26667], pitch: 0, viewMode: &#39;3D&#39;, }); // 创建省份图层 var disProvince; function initPro(code, dep) { dep = typeof dep == &#39;undefined&#39; ? 2 : dep; adCode = code; depth = dep; disProvince &amp;&amp; disProvince.setMap(null); disProvince = new AMap.DistrictLayer.Province({ zIndex: 12, adcode: [code], depth: dep, styles: { &#39;fill&#39;: function (properties) { // properties为可用于做样式映射的字段，包含 // NAME_CHN:中文名称 // adcode_pro // adcode_cit // adcode var adcode = properties.adcode; return getColorByAdcode(adcode); }, &#39;province-stroke&#39;: &#39;cornflowerblue&#39;, &#39;city-stroke&#39;: &#39;white&#39;, // 中国地级市边界 &#39;county-stroke&#39;: &#39;rgba(255,255,255,0.5)&#39; // 中国区县边界 } }); disProvince.setMap(map); } // 颜色辅助方法 var colors = {}; var getColorByAdcode = function (adcode) { if (!colors[adcode]) { var gb = Math.random() * 155 + 50; colors[adcode] = &#39;rgba(&#39; + gb + &#39;,&#39; + gb + &#39;,255,0.45)&#39;; } return colors[adcode]; }; // 五省中心经纬度 var centerMapLng = new Map(); var centerMapLat = new Map(); //lng; //经度 //lat; //纬度 centerMapLng.set(&quot;530000&quot;,102.72); centerMapLat.set(&quot;530000&quot;,25.05); centerMapLng.set(&quot;440000&quot;,113.23333); centerMapLat.set(&quot;440000&quot;,23.26667); centerMapLng.set(&quot;520000&quot;,106.63); centerMapLat.set(&quot;520000&quot;,26.65); centerMapLng.set(&quot;450000&quot;,108.22); centerMapLat.set(&quot;450000&quot;,22.48); centerMapLng.set(&quot;460000&quot;,110.32); centerMapLat.set(&quot;460000&quot;,20.03); // 按钮事件 function changeAdcode(code) { if (code != 100000) { initPro(code, depth); setCenter(code); } } function setCenter(code){ var lng = centerMapLng.get(code); var lat = centerMapLat.get(code) map.setCenter([lng,lat]); } function changeDepth(dep) { initPro(adCode, dep); } initPro(adCode, depth); //设置地图显示范围 var mybounds = new AMap.Bounds([73, 4], [135,53]); // 设置经纬度边界 [西南经纬度,东北经纬度] //map.setBounds(mybounds); //会将地图放大 map.setLimitBounds(mybounds); // 路线规划，需要有起点和重点经纬度 //起点latitude: &quot;23.167439&quot; longitude: &quot;113.46625&quot; //latitude: &quot;23.00637&quot; longitude: &quot;113.124749&quot; 终点 佛山医院 var truckDriving = new AMap.TruckDriving({ policy: 0, // 规划策略 size: 1, // 车型大小 width: 2.5, // 宽度 height: 2, // 高度 load: 1, // 载重 weight: 12, // 自重 axlesNum: 2, // 轴数 province: &#39;京&#39;, // 车辆牌照省份 }) var path = [] path.push({lnglat:[113.46625, 23.167439]});//起点 //path.push({lnglat:[113.324749, 23.107439]});//途径 path.push({lnglat:[113.124749, 23.00637]});//终点 truckDriving.search(path, function(status, result) { // result即是对应的货车导航信息，相关数据结构文档请参考 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult if (status === &#39;complete&#39;) { //log.success(&#39;绘制货车路线完成&#39;) if (result.routes &amp;&amp; result.routes.length) { drawRoute(result.routes[0]) } } else { //log.error(&#39;获取货车规划数据失败：&#39; + result) } }) // 画路线 function drawRoute (route) { var path = parseRouteToPath(route) var startMarker = new AMap.Marker({ position: path[0], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/start.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var endMarker = new AMap.Marker({ position: path[path.length - 1], icon: &#39;https://webapi.amap.com/theme/v1.3/markers/n/end.png&#39;, map: map, anchor: &#39;bottom-center&#39;, }) var routeLine = new AMap.Polyline({ path: path, isOutline: true, outlineColor: &#39;#ffeeee&#39;, borderWeight: 2, strokeWeight: 5, strokeOpacity: 0.9, strokeColor: &#39;#0091ff&#39;, lineJoin: &#39;round&#39; }) map.add(routeLine); // 调整视野达到最佳显示区域 map.setFitView([ startMarker, endMarker, routeLine ]) // drawPath(); map.setZoom(8); } // 解析DrivingRoute对象，构造成AMap.Polyline的path参数需要的格式 // DrivingResult对象结构参考文档 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DriveRoute function parseRouteToPath(route) { var path = [] for (var i = 0, l = route.steps.length; i &lt; l; i++) { var step = route.steps[i] for (var j = 0, n = step.path.length; j &lt; n; j++) { path.push(step.path[j]) } } return path } // 路线规划好后，画出已行驶路线 //轨迹演示 /*; 113.466393,23.16349;113.466124,23.163199;113.466024,23.163116;113.465586,23.162886;113.465469,23.162873;113.465334,23.162869;113.464753,23.162865;113.464288,23.162878;113.463902,23.162912;113.462956,23.163025;113.461311,23.16322;113.460981,23.16326;113.460326,23.163342;113.460104,23.163368;113.458754,23.163628;113.457943,23.163759;113.457465,23.163811;113.457331,23.163828;113.456879,23.163889;113.456059,23.163984 */ var marker, lineArr = [ [113.465972,23.167452], [113.465964,23.167335], [113.465968,23.167174], [113.465924,23.166984], [113.465556,23.165217], [113.465707,23.165074], [113.465777,23.165048], [113.466662,23.164813], [113.466662,23.164813], [113.466632,23.164683], [113.466576,23.164375], [113.466428,23.163689], [113.466393,23.16349], [113.466393,23.16349], [113.466124,23.163199], [113.465586,23.162886], [113.465334,23.162869], [113.464753,23.162865], [113.463902,23.162912] ]; marker = new AMap.Marker({ map: map, position: [113.464753,23.162865], icon: &quot;https://webapi.amap.com/images/car.png&quot;, offset: new AMap.Pixel(-26, -13), autoRotation: true, angle:-90, }); function drawPath(){ // 绘制轨迹 var polyline = new AMap.Polyline({ map: map, path: lineArr, showDir:true, strokeColor: &quot;#AF5&quot;,//&quot;#28F&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); var passedPolyline = new AMap.Polyline({ map: map, // path: lineArr, strokeColor: &quot;#AF5&quot;, //线颜色 // strokeOpacity: 1, //线透明度 strokeWeight: 6, //线宽 // strokeStyle: &quot;solid&quot; //线样式 }); marker.on(&#39;moving&#39;, function (e) { passedPolyline.setPath(e.passedPath); }); map.setFitView(); marker.moveAlong([lineArr[lineArr.length-2],lineArr[lineArr.length-1]], 200); } 记录一次开发试用记录，学习请看官网API，描写详细清晰","headline":"高德地图API使用","dateModified":"2021-01-17T03:16:50+08:00","datePublished":"2020-05-19T19:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://narule.github.io/posts/gaode_map/"},"url":"https://narule.github.io/posts/gaode_map/","author":{"@type":"Person","name":"Narule"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>高德地图API使用 | Narule</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JVHJ82NYZT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JVHJ82NYZT'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://narule.github.io/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Narule</a></div><div class="site-subtitle font-italic">A Blog for Article; Chinese Blog is www.cnblogs.com/narule</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/narule" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/no_twitter" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['narule','163.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>高德地图API使用</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>高德地图API使用</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, May 19, 2020, 7:00 PM +0800" > May 19, 2020 <i class="unloaded">2020-05-19T19:00:00+08:00</i> </span> by <span class="author"> Narule </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 17, 2021, 3:16 AM +0800" > Jan 17, 2021 <i class="unloaded">2021-01-17T03:16:50+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1522 words">8 min</span></div></div><div class="post-content"><h1 id="高德地图使用">高德地图使用</h1><p>api地址 https://lbs.amap.com/api/javascript-api/summary 高德地图有提供公共接口，查看api，能实现一些项目基本需求效果</p><h2 id="基本使用">基本使用</h2><h3 id="注册帐号">注册帐号</h3><p>使用高德api，首先需要注册帐号，并且申请key(以个人或者公司的名字)，获取key后才能使用高德地图API去使用开发地图相关功能</p><h3 id="高德地图使用省图显示路线规划行车轨迹">高德地图使用，省图显示，路线规划，行车轨迹</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img2020.cnblogs.com/blog/1436620/202005/1436620-20200519090747402-1624071223.png" alt="" /></p><p>行车路线规划 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img2020.cnblogs.com/blog/1436620/202005/1436620-20200519091007933-1512399553.png" alt="" /></p><p>已行驶轨迹绘制 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img2020.cnblogs.com/blog/1436620/202005/1436620-20200519091124218-2033211035.png" alt="" /></p><h4 id="monitorhtml">monitor.html</h4><div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">'X-UA-Compatible'</span> <span class="na">content=</span><span class="s">'IE=edge'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"initial-scale=1.0, user-scalable=no, width=device-width"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">html</span><span class="o">,</span>
        <span class="nt">body</span><span class="o">,</span>
        <span class="nf">#container</span> <span class="p">{</span>
            <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
            <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
            <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;title&gt;</span>车辆配送行程监控<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"width: 800px;height: 800px; position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%);"</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-card"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h4&gt;</span>选择省份<span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"code-list"</span> <span class="na">id=</span><span class="s">"adcode-list"</span> <span class="na">style=</span><span class="s">"height: 28px;margin-right: 10px;"</span> <span class="na">onchange=</span><span class="s">"changeAdcode(this.value)"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"-1"</span><span class="nt">&gt;</span>选择省份<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
    <span class="nt">&lt;h4&gt;</span>选择层级<span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"code-list"</span> <span class="na">style=</span><span class="s">"height: 28px;margin-right: 10px;"</span> <span class="na">onchange=</span><span class="s">"changeDepth(this.value)"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>0 - 显示省级<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">selected</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>1 - 显示市级<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>2 - 显示区/县级<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://webapi.amap.com/maps?v=1.4.15&amp;key=你申请的key&amp;plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.TruckDriving"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://a.amap.com/Loca/static/mock/adcodes.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./js/monitor_map.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
    
   
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="c1">// 构造下拉框</span>
    <span class="kd">var</span> <span class="nx">optArr</span> <span class="o">=</span> <span class="nx">adcodes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">100000</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">item</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">选择省份</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">440000</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">450000</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">530000</span> <span class="o">||</span> <span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">520000</span> <span class="o">||</span>  <span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="mi">460000</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="dl">'</span><span class="s1">&lt;option </span><span class="dl">'</span> <span class="o">+</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">==</span> <span class="nx">adCode</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">selected</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">''</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> value="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">adcode</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/option&gt;</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//item.adCode == 360000 ||江西</span>
    <span class="p">});</span>

    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">adcode-list</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">optArr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><h4 id="monitor_mapjs">monitor_map.js</h4><p>内容：自定义地图js API使用示例</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
</pre><td class="rouge-code"><pre> 
<span class="c1">//首先或一个地图（对象）</span>
 <span class="kd">var</span> <span class="nx">adCode</span> <span class="o">=</span> <span class="mi">440000</span><span class="p">;</span>
 <span class="kd">var</span> <span class="nx">depth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nb">Map</span><span class="p">(</span><span class="dl">"</span><span class="s2">container</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
     <span class="na">resizeEnable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="na">zoom</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
     <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mf">113.23333</span><span class="p">,</span> <span class="mf">23.26667</span><span class="p">],</span>
     <span class="na">pitch</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="na">viewMode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">3D</span><span class="dl">'</span><span class="p">,</span>
 <span class="p">});</span>



 <span class="c1">// 创建省份图层</span>
 <span class="kd">var</span> <span class="nx">disProvince</span><span class="p">;</span>
 <span class="kd">function</span> <span class="nx">initPro</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">dep</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">dep</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">dep</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span> <span class="p">?</span> <span class="mi">2</span> <span class="p">:</span> <span class="nx">dep</span><span class="p">;</span>
     <span class="nx">adCode</span> <span class="o">=</span> <span class="nx">code</span><span class="p">;</span>
     <span class="nx">depth</span> <span class="o">=</span> <span class="nx">dep</span><span class="p">;</span>

     <span class="nx">disProvince</span> <span class="o">&amp;&amp;</span> <span class="nx">disProvince</span><span class="p">.</span><span class="nx">setMap</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

     <span class="nx">disProvince</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">DistrictLayer</span><span class="p">.</span><span class="nx">Province</span><span class="p">({</span>
         <span class="na">zIndex</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
         <span class="na">adcode</span><span class="p">:</span> <span class="p">[</span><span class="nx">code</span><span class="p">],</span>
         <span class="na">depth</span><span class="p">:</span> <span class="nx">dep</span><span class="p">,</span>
         <span class="na">styles</span><span class="p">:</span> <span class="p">{</span>
             <span class="dl">'</span><span class="s1">fill</span><span class="dl">'</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">properties</span><span class="p">)</span> <span class="p">{</span>
                 <span class="c1">// properties为可用于做样式映射的字段，包含</span>
                 <span class="c1">// NAME_CHN:中文名称</span>
                 <span class="c1">// adcode_pro</span>
                 <span class="c1">// adcode_cit</span>
                 <span class="c1">// adcode</span>
                 <span class="kd">var</span> <span class="nx">adcode</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">.</span><span class="nx">adcode</span><span class="p">;</span>
                 <span class="k">return</span> <span class="nx">getColorByAdcode</span><span class="p">(</span><span class="nx">adcode</span><span class="p">);</span>
             <span class="p">},</span>
             <span class="dl">'</span><span class="s1">province-stroke</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cornflowerblue</span><span class="dl">'</span><span class="p">,</span>
             <span class="dl">'</span><span class="s1">city-stroke</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 中国地级市边界</span>
             <span class="dl">'</span><span class="s1">county-stroke</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rgba(255,255,255,0.5)</span><span class="dl">'</span> <span class="c1">// 中国区县边界</span>
         <span class="p">}</span>
     <span class="p">});</span>

     <span class="nx">disProvince</span><span class="p">.</span><span class="nx">setMap</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
 <span class="p">}</span>

 
 <span class="c1">// 颜色辅助方法</span>
 <span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">{};</span>
 <span class="kd">var</span> <span class="nx">getColorByAdcode</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">adcode</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">colors</span><span class="p">[</span><span class="nx">adcode</span><span class="p">])</span> <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">gb</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">155</span> <span class="o">+</span> <span class="mi">50</span><span class="p">;</span>
         <span class="nx">colors</span><span class="p">[</span><span class="nx">adcode</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">rgba(</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">gb</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">gb</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,255,0.45)</span><span class="dl">'</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">return</span> <span class="nx">colors</span><span class="p">[</span><span class="nx">adcode</span><span class="p">];</span>
 <span class="p">};</span>

<span class="c1">// 五省中心经纬度</span>
 <span class="kd">var</span> <span class="nx">centerMapLng</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
 <span class="kd">var</span> <span class="nx">centerMapLat</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
 <span class="c1">//lng; //经度</span>
 <span class="c1">//lat; //纬度</span>
 <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">530000</span><span class="dl">"</span><span class="p">,</span><span class="mf">102.72</span><span class="p">);</span>
 <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">530000</span><span class="dl">"</span><span class="p">,</span><span class="mf">25.05</span><span class="p">);</span>

 <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">440000</span><span class="dl">"</span><span class="p">,</span><span class="mf">113.23333</span><span class="p">);</span>
 <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">440000</span><span class="dl">"</span><span class="p">,</span><span class="mf">23.26667</span><span class="p">);</span>

 <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">520000</span><span class="dl">"</span><span class="p">,</span><span class="mf">106.63</span><span class="p">);</span>
 <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">520000</span><span class="dl">"</span><span class="p">,</span><span class="mf">26.65</span><span class="p">);</span>

 <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">450000</span><span class="dl">"</span><span class="p">,</span><span class="mf">108.22</span><span class="p">);</span>
 <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">450000</span><span class="dl">"</span><span class="p">,</span><span class="mf">22.48</span><span class="p">);</span>

 <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">460000</span><span class="dl">"</span><span class="p">,</span><span class="mf">110.32</span><span class="p">);</span>
 <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">460000</span><span class="dl">"</span><span class="p">,</span><span class="mf">20.03</span><span class="p">);</span>
 <span class="c1">// 按钮事件</span>
 <span class="kd">function</span> <span class="nx">changeAdcode</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">code</span> <span class="o">!=</span> <span class="mi">100000</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">initPro</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">depth</span><span class="p">);</span>
         <span class="nx">setCenter</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="kd">function</span> <span class="nx">setCenter</span><span class="p">(</span><span class="nx">code</span><span class="p">){</span>
     <span class="kd">var</span> <span class="nx">lng</span> <span class="o">=</span> <span class="nx">centerMapLng</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>
     <span class="kd">var</span> <span class="nx">lat</span> <span class="o">=</span> <span class="nx">centerMapLat</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
     <span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">([</span><span class="nx">lng</span><span class="p">,</span><span class="nx">lat</span><span class="p">]);</span>
 <span class="p">}</span>

 <span class="kd">function</span> <span class="nx">changeDepth</span><span class="p">(</span><span class="nx">dep</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">initPro</span><span class="p">(</span><span class="nx">adCode</span><span class="p">,</span> <span class="nx">dep</span><span class="p">);</span>
 <span class="p">}</span>

 <span class="nx">initPro</span><span class="p">(</span><span class="nx">adCode</span><span class="p">,</span> <span class="nx">depth</span><span class="p">);</span>

 <span class="c1">//设置地图显示范围</span>
 <span class="kd">var</span> <span class="nx">mybounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">([</span><span class="mi">73</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">135</span><span class="p">,</span><span class="mi">53</span><span class="p">]);</span> <span class="c1">// 设置经纬度边界  [西南经纬度,东北经纬度]</span>
 <span class="c1">//map.setBounds(mybounds); //会将地图放大</span>
 <span class="nx">map</span><span class="p">.</span><span class="nx">setLimitBounds</span><span class="p">(</span><span class="nx">mybounds</span><span class="p">);</span>


 <span class="c1">// 路线规划，需要有起点和重点经纬度</span>

 <span class="c1">//起点latitude: "23.167439" longitude: "113.46625"</span>
 <span class="c1">//latitude: "23.00637" longitude: "113.124749" 终点 佛山医院</span>
 <span class="kd">var</span> <span class="nx">truckDriving</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">TruckDriving</span><span class="p">({</span>
     <span class="na">policy</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// 规划策略</span>
     <span class="na">size</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// 车型大小</span>
     <span class="na">width</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="c1">// 宽度</span>
     <span class="na">height</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// 高度      </span>
     <span class="na">load</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// 载重</span>
     <span class="na">weight</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="c1">// 自重</span>
     <span class="na">axlesNum</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// 轴数</span>
     <span class="na">province</span><span class="p">:</span> <span class="dl">'</span><span class="s1">京</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 车辆牌照省份</span>
 <span class="p">})</span>


 <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[]</span>
 <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">lnglat</span><span class="p">:[</span><span class="mf">113.46625</span><span class="p">,</span> <span class="mf">23.167439</span><span class="p">]});</span><span class="c1">//起点</span>
 <span class="c1">//path.push({lnglat:[113.324749, 23.107439]});//途径</span>
 <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="na">lnglat</span><span class="p">:[</span><span class="mf">113.124749</span><span class="p">,</span> <span class="mf">23.00637</span><span class="p">]});</span><span class="c1">//终点</span>



 <span class="nx">truckDriving</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// result即是对应的货车导航信息，相关数据结构文档请参考 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">//log.success('绘制货车路线完成')</span>

         <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">drawRoute</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 
         <span class="p">}</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="c1">//log.error('获取货车规划数据失败：' + result)</span>
     <span class="p">}</span>
 <span class="p">})</span>


 <span class="c1">// 画路线</span>
 <span class="kd">function</span> <span class="nx">drawRoute</span> <span class="p">(</span><span class="nx">route</span><span class="p">)</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">parseRouteToPath</span><span class="p">(</span><span class="nx">route</span><span class="p">)</span>

     <span class="kd">var</span> <span class="nx">startMarker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
         <span class="na">position</span><span class="p">:</span> <span class="nx">path</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
         <span class="na">icon</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://webapi.amap.com/theme/v1.3/markers/n/start.png</span><span class="dl">'</span><span class="p">,</span>
         <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
         <span class="na">anchor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bottom-center</span><span class="dl">'</span><span class="p">,</span>
     <span class="p">})</span>

     <span class="kd">var</span> <span class="nx">endMarker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
         <span class="na">position</span><span class="p">:</span> <span class="nx">path</span><span class="p">[</span><span class="nx">path</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span>
         <span class="na">icon</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://webapi.amap.com/theme/v1.3/markers/n/end.png</span><span class="dl">'</span><span class="p">,</span>
         <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
         <span class="na">anchor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bottom-center</span><span class="dl">'</span><span class="p">,</span>
     <span class="p">})</span>

     <span class="kd">var</span> <span class="nx">routeLine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Polyline</span><span class="p">({</span>
         <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">,</span>
         <span class="na">isOutline</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="na">outlineColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#ffeeee</span><span class="dl">'</span><span class="p">,</span>
         <span class="na">borderWeight</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
         <span class="na">strokeWeight</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
         <span class="na">strokeOpacity</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
         <span class="na">strokeColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#0091ff</span><span class="dl">'</span><span class="p">,</span>
         <span class="na">lineJoin</span><span class="p">:</span> <span class="dl">'</span><span class="s1">round</span><span class="dl">'</span>
     <span class="p">})</span>

     <span class="nx">map</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">routeLine</span><span class="p">);</span>
     <span class="c1">// 调整视野达到最佳显示区域</span>
     <span class="nx">map</span><span class="p">.</span><span class="nx">setFitView</span><span class="p">([</span> <span class="nx">startMarker</span><span class="p">,</span> <span class="nx">endMarker</span><span class="p">,</span> <span class="nx">routeLine</span> <span class="p">])</span>
     <span class="c1">//</span>
     <span class="nx">drawPath</span><span class="p">();</span>
     <span class="nx">map</span><span class="p">.</span><span class="nx">setZoom</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
 <span class="p">}</span>

 <span class="c1">// 解析DrivingRoute对象，构造成AMap.Polyline的path参数需要的格式</span>
 <span class="c1">// DrivingResult对象结构参考文档 https://lbs.amap.com/api/javascript-api/reference/route-search#m_DriveRoute</span>
 <span class="kd">function</span> <span class="nx">parseRouteToPath</span><span class="p">(</span><span class="nx">route</span><span class="p">)</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">route</span><span class="p">.</span><span class="nx">steps</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">step</span> <span class="o">=</span> <span class="nx">route</span><span class="p">.</span><span class="nx">steps</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>

         <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">step</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">step</span><span class="p">.</span><span class="nx">path</span><span class="p">[</span><span class="nx">j</span><span class="p">])</span>
         <span class="p">}</span>
     <span class="p">}</span>

     <span class="k">return</span> <span class="nx">path</span>
 <span class="p">}</span>



<span class="c1">// 路线规划好后，画出已行驶路线</span>

 <span class="c1">//轨迹演示</span>
 <span class="cm">/*;

 113.466393,23.16349;113.466124,23.163199;113.466024,23.163116;113.465586,23.162886;113.465469,23.162873;113.465334,23.162869;113.464753,23.162865;113.464288,23.162878;113.463902,23.162912;113.462956,23.163025;113.461311,23.16322;113.460981,23.16326;113.460326,23.163342;113.460104,23.163368;113.458754,23.163628;113.457943,23.163759;113.457465,23.163811;113.457331,23.163828;113.456879,23.163889;113.456059,23.163984
 
 */</span>
 <span class="kd">var</span> <span class="nx">marker</span><span class="p">,</span> <span class="nx">lineArr</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">[</span><span class="mf">113.465972</span><span class="p">,</span><span class="mf">23.167452</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465964</span><span class="p">,</span><span class="mf">23.167335</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465968</span><span class="p">,</span><span class="mf">23.167174</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465924</span><span class="p">,</span><span class="mf">23.166984</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465556</span><span class="p">,</span><span class="mf">23.165217</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465707</span><span class="p">,</span><span class="mf">23.165074</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465777</span><span class="p">,</span><span class="mf">23.165048</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466662</span><span class="p">,</span><span class="mf">23.164813</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466662</span><span class="p">,</span><span class="mf">23.164813</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466632</span><span class="p">,</span><span class="mf">23.164683</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466576</span><span class="p">,</span><span class="mf">23.164375</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466428</span><span class="p">,</span><span class="mf">23.163689</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466393</span><span class="p">,</span><span class="mf">23.16349</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466393</span><span class="p">,</span><span class="mf">23.16349</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.466124</span><span class="p">,</span><span class="mf">23.163199</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465586</span><span class="p">,</span><span class="mf">23.162886</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.465334</span><span class="p">,</span><span class="mf">23.162869</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.464753</span><span class="p">,</span><span class="mf">23.162865</span><span class="p">],</span>
      <span class="p">[</span><span class="mf">113.463902</span><span class="p">,</span><span class="mf">23.162912</span><span class="p">]</span>
      <span class="p">];</span>

 
 <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
     <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
     <span class="na">position</span><span class="p">:</span> <span class="p">[</span><span class="mf">113.464753</span><span class="p">,</span><span class="mf">23.162865</span><span class="p">],</span>
     <span class="na">icon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://webapi.amap.com/images/car.png</span><span class="dl">"</span><span class="p">,</span>
     <span class="na">offset</span><span class="p">:</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Pixel</span><span class="p">(</span><span class="o">-</span><span class="mi">26</span><span class="p">,</span> <span class="o">-</span><span class="mi">13</span><span class="p">),</span>
     <span class="na">autoRotation</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="na">angle</span><span class="p">:</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span>
 <span class="p">});</span>

 <span class="kd">function</span> <span class="nx">drawPath</span><span class="p">(){</span>

 
     <span class="c1">// 绘制轨迹</span>
     <span class="kd">var</span> <span class="nx">polyline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Polyline</span><span class="p">({</span>
         <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
         <span class="na">path</span><span class="p">:</span> <span class="nx">lineArr</span><span class="p">,</span>
         <span class="na">showDir</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="na">strokeColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#AF5</span><span class="dl">"</span><span class="p">,</span><span class="c1">//"#28F",  //线颜色</span>
         <span class="c1">// strokeOpacity: 1,     //线透明度</span>
         <span class="na">strokeWeight</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>      <span class="c1">//线宽</span>
         <span class="c1">// strokeStyle: "solid"  //线样式</span>
     <span class="p">});</span>


     <span class="kd">var</span> <span class="nx">passedPolyline</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AMap</span><span class="p">.</span><span class="nx">Polyline</span><span class="p">({</span>
         <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
         <span class="c1">// path: lineArr,</span>
         <span class="na">strokeColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#AF5</span><span class="dl">"</span><span class="p">,</span>  <span class="c1">//线颜色</span>
         <span class="c1">// strokeOpacity: 1,     //线透明度</span>
         <span class="na">strokeWeight</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>      <span class="c1">//线宽</span>
         <span class="c1">// strokeStyle: "solid"  //线样式</span>
     <span class="p">});</span>


     <span class="nx">marker</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">moving</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">passedPolyline</span><span class="p">.</span><span class="nx">setPath</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">passedPath</span><span class="p">);</span>
     <span class="p">});</span>
     
     <span class="nx">map</span><span class="p">.</span><span class="nx">setFitView</span><span class="p">();</span>

     <span class="nx">marker</span><span class="p">.</span><span class="nx">moveAlong</span><span class="p">([</span><span class="nx">lineArr</span><span class="p">[</span><span class="nx">lineArr</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span><span class="nx">lineArr</span><span class="p">[</span><span class="nx">lineArr</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]],</span> <span class="mi">200</span><span class="p">);</span>
 <span class="p">}</span>
</pre></table></code></div></div><p>记录一次开发试用记录，学习请看官网API，描写详细清晰</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technology-%E6%8A%80%E6%9C%AF/'>Technology^技术</a>, <a href='/categories/tools-programs-%E7%A8%8B%E5%BA%8F%E5%B7%A5%E5%85%B7/'>Tools&Programs^程序工具</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/writing/" class="post-tag no-text-decoration" >writing</a> <a href="/tags/map/" class="post-tag no-text-decoration" >map</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=高德地图API使用 - Narule&url=https://narule.github.io/posts/gaode_map/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=高德地图API使用 - Narule&u=https://narule.github.io/posts/gaode_map/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=高德地图API使用 - Narule&url=https://narule.github.io/posts/gaode_map/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E4%BA%92%E8%81%94%E7%BD%91%E5%A4%87%E5%BF%98%E5%BD%95/">互联网备忘录</a><li><a href="/posts/%E7%94%A8%E6%88%B7%E6%8C%87%E7%BA%B9/">用户指纹</a><li><a href="/posts/%E5%85%B3%E4%BA%8Enetty/">关于netty</a><li><a href="/posts/%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%AE%BE%E8%AE%A1-The-design-of-an-automatically-updated-blog/">The design of an automatically updated blog | 自动更新博客的设计</a><li><a href="/posts/AbstractQueuedSynchronizer%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E9%98%BB%E5%A1%9E%E9%94%81/">AbstractQueuedSynchronizer抽象类-阻塞锁</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/think/">Think</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/website/">website</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/map/">map</a> <a class="post-tag" href="/tags/nginx/">nginx</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E5%9F%BA%E4%BA%8E%E9%9A%8F%E6%9C%BA%E5%AE%9A%E4%BD%8D%E7%9A%84%E5%9C%B0%E5%9B%BE%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E7%AE%97%E6%B3%95/"><div class="card-body"> <span class="timeago small" > Jun 13, 2021 <i class="unloaded">2021-06-13T07:29:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>基于随机定位的地图信息获取方式</h3><div class="text-muted small"><p> 基于随机定位的地图信息获取方式 基本定义 场景 一个应用要用到地图，地图拖动时，要填补新的版图上的地理信息 目的 快速获取屏幕内需要的地图信息，不获取多余无用的地图信息 功能要点 1.确定地图范围，获取的信息不超出显示屏过多 （比如屏幕地图查询100平方米的信息，服务返回的信息不能超过130平米的地图信息） 2.动态快速获取信息，通过定位快速获取周围地理信息，第一时间从缓存...</p></div></div></a></div><div class="card"> <a href="/posts/certbot%E8%8E%B7%E5%8F%96%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/"><div class="card-body"> <span class="timeago small" > Feb 18, 2021 <i class="unloaded">2021-02-18T10:45:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>certbot 获取数字证书失效问题</h3><div class="text-muted small"><p> certbot 获取数字证书失效问题 数字证书 数字证书就是一个网站域名在通信时使用了安全加密的证明 数字证书为网站数据交互提供加密，用于保障通信保密安全，数字证书不是随意创建的，一般需要比较有公信力的组织或团队提供数字证书才会被认可。 个人创建一个证书，即使技术厉害别人也要花较多时间成本去了解一个团队，类似谷歌微软BAT确认可靠的数字证书，还是会有比较多的人容易信任认可的。...</p></div></div></a></div><div class="card"> <a href="/posts/nginx%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/"><div class="card-body"> <span class="timeago small" > Dec 17, 2018 <i class="unloaded">2018-12-17T18:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>nginx使用配置</h3><div class="text-muted small"><p> 使用案列 使用nginx首先要明确使用场景，这里是一台服务器实现多种类型访问：网站首页访问，GitLab访问，note(私人springboot项目)，静态文件访问。’’ 下面是一份配置文件 nginx.conf，这里假设服务起域名是www.test.com(配置文件是从真实主机copy过来的，仅原域名www.xxx.com被改为www.test.com)。它实现了以下功能: 1.ht...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E5%9B%9B%E8%BD%B4%E9%A3%9E%E8%A1%8C%E5%99%A8/" class="btn btn-outline-primary"><p>四轴飞行器相关技术</p></a> <a href="/posts/%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/" class="btn btn-outline-primary"><p>数据加密</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://narule.github.io/posts/gaode_map/'; this.page.identifier = '/posts/gaode_map/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://cnblogs.com/narule">narule</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/think/">Think</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/website/">website</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/map/">map</a> <a class="post-tag" href="/tags/nginx/">nginx</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://narule.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
