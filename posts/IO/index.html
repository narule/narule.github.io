<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Java IO" /><meta name="author" content="Narule" /><meta property="og:locale" content="en_US" /><meta name="description" content="Java IO IO: Input And Output java 中有IO，即输入与输出，输入input 输出output java 有典型的IO与NIO，常说的IO指典型IO, 阻塞IO， NIO表示非阻塞IO 阻塞： 等待IO任务完成才能继续下一步的操作 非阻塞： 暂不能清晰描述，可以查看网址文章链接：http://ifeve.com/overview/ 这里简单介绍Java中常见的文件读写’’ 字节流读写文件： 读文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); //创建文件输入流 byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); // 关闭流 释放资源 } } 写文件 1 2 3 4 5 6 7 8 public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\Jser\\data\\test\\writeFile.xml&quot;); //获取写文件的位置 if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); //创建文件输出流 fileOutputStream.write(content); // content 表示写入文件的内容 fileOutputStream.close(); //关闭流 释放资源 } 拷贝文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 import java.io.File; import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.IOException; import java.io.RandomAccessFile; import java.nio.ByteBuffer; import java.nio.channels.FileChannel; public class TestIO { public static void main(String[] args) throws IOException { String originFilePath = &quot;D:\\Jser\\data\\git-rep\\jdp\\note\\Program-StudyPlan.md&quot;; String aimFilePath = &quot;D:\\Jser\\data\\test\\aimFile.md&quot;; copyFile(originFilePath, aimFilePath); // testRandonAccessFile(); } /* * 读文件 */ public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); } } /** * 写文件 * @throws IOException */ public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\Jser\\data\\test\\writeFile.xml&quot;); if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); fileOutputStream.write(content); fileOutputStream.close(); } /* * 文件复制 -&gt; 读取一个文件复制到另一个地方 */ public static void copyFile(String originFilePath, String aimPath) { File originFile = new File(originFilePath); if (!originFile.exists()) { System.err.println(&quot;file is not exists!&quot;); return; //文件不存在 } File aimFile = new File(aimPath); FileInputStream fi = null; FileOutputStream fo = null; try { byte[] content = new byte[1024]; //每次读文件内容的字节数组 if (!aimFile.exists()) aimFile.createNewFile(); // 通过路径转化为 输入流 和 输出流 fi = new FileInputStream(originFile); //输入流 fo = new FileOutputStream(aimFile); //输出流 while (fi.read(content) != -1) { //输入流将数据读取到字节数组，如果返回值为 -1 表示文件已经读完 fo.write(content); //输出流将数组内容写入文件 } } catch (IOException e) { System.err.println(&quot;read file exception!&quot;); try { // close resources; if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException es) { // TODO Auto-generated catch block es.printStackTrace(); } } finally { try { if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } /* * java 涉及NIO的 RandomAccessFile 类 */ private static void testRandonAccessFile() throws IOException { RandomAccessFile aFile = new RandomAccessFile(&quot;D:\\Jser\\data\\git-rep\\config\\maven\\settings.xml&quot;, &quot;rw&quot;); FileChannel channel = aFile.getChannel(); File file = new File(&quot;D:\\Jser\\data\\test\\creatFile.xml&quot;); if (!file.getParentFile().exists()) file.getParentFile().mkdirs(); if (!file.isFile()) { System.err.println(&quot;file is not exist!&quot;); System.exit(0); } if (!file.exists()) file.createNewFile(); FileOutputStream newFile = new FileOutputStream(file); ByteBuffer buffer = ByteBuffer.allocate(1024); int i = 0; while (channel.read(buffer) != -1) { i++; buffer.flip(); while (buffer.hasRemaining()) { newFile.write(buffer.get()); } buffer.clear(); } aFile.close(); newFile.close(); System.out.println(&quot;文件读取次数：&quot; + i); } }" /><meta property="og:description" content="Java IO IO: Input And Output java 中有IO，即输入与输出，输入input 输出output java 有典型的IO与NIO，常说的IO指典型IO, 阻塞IO， NIO表示非阻塞IO 阻塞： 等待IO任务完成才能继续下一步的操作 非阻塞： 暂不能清晰描述，可以查看网址文章链接：http://ifeve.com/overview/ 这里简单介绍Java中常见的文件读写’’ 字节流读写文件： 读文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); //创建文件输入流 byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); // 关闭流 释放资源 } } 写文件 1 2 3 4 5 6 7 8 public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\Jser\\data\\test\\writeFile.xml&quot;); //获取写文件的位置 if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); //创建文件输出流 fileOutputStream.write(content); // content 表示写入文件的内容 fileOutputStream.close(); //关闭流 释放资源 } 拷贝文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 import java.io.File; import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.IOException; import java.io.RandomAccessFile; import java.nio.ByteBuffer; import java.nio.channels.FileChannel; public class TestIO { public static void main(String[] args) throws IOException { String originFilePath = &quot;D:\\Jser\\data\\git-rep\\jdp\\note\\Program-StudyPlan.md&quot;; String aimFilePath = &quot;D:\\Jser\\data\\test\\aimFile.md&quot;; copyFile(originFilePath, aimFilePath); // testRandonAccessFile(); } /* * 读文件 */ public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); } } /** * 写文件 * @throws IOException */ public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\Jser\\data\\test\\writeFile.xml&quot;); if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); fileOutputStream.write(content); fileOutputStream.close(); } /* * 文件复制 -&gt; 读取一个文件复制到另一个地方 */ public static void copyFile(String originFilePath, String aimPath) { File originFile = new File(originFilePath); if (!originFile.exists()) { System.err.println(&quot;file is not exists!&quot;); return; //文件不存在 } File aimFile = new File(aimPath); FileInputStream fi = null; FileOutputStream fo = null; try { byte[] content = new byte[1024]; //每次读文件内容的字节数组 if (!aimFile.exists()) aimFile.createNewFile(); // 通过路径转化为 输入流 和 输出流 fi = new FileInputStream(originFile); //输入流 fo = new FileOutputStream(aimFile); //输出流 while (fi.read(content) != -1) { //输入流将数据读取到字节数组，如果返回值为 -1 表示文件已经读完 fo.write(content); //输出流将数组内容写入文件 } } catch (IOException e) { System.err.println(&quot;read file exception!&quot;); try { // close resources; if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException es) { // TODO Auto-generated catch block es.printStackTrace(); } } finally { try { if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } /* * java 涉及NIO的 RandomAccessFile 类 */ private static void testRandonAccessFile() throws IOException { RandomAccessFile aFile = new RandomAccessFile(&quot;D:\\Jser\\data\\git-rep\\config\\maven\\settings.xml&quot;, &quot;rw&quot;); FileChannel channel = aFile.getChannel(); File file = new File(&quot;D:\\Jser\\data\\test\\creatFile.xml&quot;); if (!file.getParentFile().exists()) file.getParentFile().mkdirs(); if (!file.isFile()) { System.err.println(&quot;file is not exist!&quot;); System.exit(0); } if (!file.exists()) file.createNewFile(); FileOutputStream newFile = new FileOutputStream(file); ByteBuffer buffer = ByteBuffer.allocate(1024); int i = 0; while (channel.read(buffer) != -1) { i++; buffer.flip(); while (buffer.hasRemaining()) { newFile.write(buffer.get()); } buffer.clear(); } aFile.close(); newFile.close(); System.out.println(&quot;文件读取次数：&quot; + i); } }" /><link rel="canonical" href="https://narule.github.io/posts/IO/" /><meta property="og:url" content="https://narule.github.io/posts/IO/" /><meta property="og:site_name" content="Narule" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-23T20:10:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Java IO" /><meta name="twitter:site" content="@no_twitter" /><meta name="twitter:creator" content="@Narule" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"Java IO IO: Input And Output java 中有IO，即输入与输出，输入input 输出output java 有典型的IO与NIO，常说的IO指典型IO, 阻塞IO， NIO表示非阻塞IO 阻塞： 等待IO任务完成才能继续下一步的操作 非阻塞： 暂不能清晰描述，可以查看网址文章链接：http://ifeve.com/overview/ 这里简单介绍Java中常见的文件读写’’ 字节流读写文件： 读文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); //创建文件输入流 byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); // 关闭流 释放资源 } } 写文件 1 2 3 4 5 6 7 8 public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\\\Jser\\\\data\\\\test\\\\writeFile.xml&quot;); //获取写文件的位置 if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); //创建文件输出流 fileOutputStream.write(content); // content 表示写入文件的内容 fileOutputStream.close(); //关闭流 释放资源 } 拷贝文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 import java.io.File; import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.IOException; import java.io.RandomAccessFile; import java.nio.ByteBuffer; import java.nio.channels.FileChannel; public class TestIO { public static void main(String[] args) throws IOException { String originFilePath = &quot;D:\\\\Jser\\\\data\\\\git-rep\\\\jdp\\\\note\\\\Program-StudyPlan.md&quot;; String aimFilePath = &quot;D:\\\\Jser\\\\data\\\\test\\\\aimFile.md&quot;; copyFile(originFilePath, aimFilePath); // testRandonAccessFile(); } /* * 读文件 */ public static void readFile(String filePath) throws IOException { File file = new File(filePath); if (!file.exists() || !file.isFile()) { System.out.println(&quot;file is not exist&quot;); } else { FileInputStream fileInputStream = new FileInputStream(file); byte[] read = new byte[1024]; while (fileInputStream.read(read) != -1) { System.out.println(&quot;read content:&quot; + read); } fileInputStream.close(); } } /** * 写文件 * @throws IOException */ public static void writeFile(byte[] content) throws IOException { File file = new File(&quot;D:\\\\Jser\\\\data\\\\test\\\\writeFile.xml&quot;); if (!file.exists()) file.createNewFile(); FileOutputStream fileOutputStream = new FileOutputStream(file); fileOutputStream.write(content); fileOutputStream.close(); } /* * 文件复制 -&gt; 读取一个文件复制到另一个地方 */ public static void copyFile(String originFilePath, String aimPath) { File originFile = new File(originFilePath); if (!originFile.exists()) { System.err.println(&quot;file is not exists!&quot;); return; //文件不存在 } File aimFile = new File(aimPath); FileInputStream fi = null; FileOutputStream fo = null; try { byte[] content = new byte[1024]; //每次读文件内容的字节数组 if (!aimFile.exists()) aimFile.createNewFile(); // 通过路径转化为 输入流 和 输出流 fi = new FileInputStream(originFile); //输入流 fo = new FileOutputStream(aimFile); //输出流 while (fi.read(content) != -1) { //输入流将数据读取到字节数组，如果返回值为 -1 表示文件已经读完 fo.write(content); //输出流将数组内容写入文件 } } catch (IOException e) { System.err.println(&quot;read file exception!&quot;); try { // close resources; if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException es) { // TODO Auto-generated catch block es.printStackTrace(); } } finally { try { if (fo != null) fo.close(); if (fi != null) fi.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } /* * java 涉及NIO的 RandomAccessFile 类 */ private static void testRandonAccessFile() throws IOException { RandomAccessFile aFile = new RandomAccessFile(&quot;D:\\\\Jser\\\\data\\\\git-rep\\\\config\\\\maven\\\\settings.xml&quot;, &quot;rw&quot;); FileChannel channel = aFile.getChannel(); File file = new File(&quot;D:\\\\Jser\\\\data\\\\test\\\\creatFile.xml&quot;); if (!file.getParentFile().exists()) file.getParentFile().mkdirs(); if (!file.isFile()) { System.err.println(&quot;file is not exist!&quot;); System.exit(0); } if (!file.exists()) file.createNewFile(); FileOutputStream newFile = new FileOutputStream(file); ByteBuffer buffer = ByteBuffer.allocate(1024); int i = 0; while (channel.read(buffer) != -1) { i++; buffer.flip(); while (buffer.hasRemaining()) { newFile.write(buffer.get()); } buffer.clear(); } aFile.close(); newFile.close(); System.out.println(&quot;文件读取次数：&quot; + i); } }","headline":"Java IO","dateModified":"2021-01-17T03:12:22+08:00","datePublished":"2019-06-23T20:10:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://narule.github.io/posts/IO/"},"url":"https://narule.github.io/posts/IO/","author":{"@type":"Person","name":"Narule"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>Java IO | Narule</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-JVHJ82NYZT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JVHJ82NYZT'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://narule.github.io/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Narule</a></div><div class="site-subtitle font-italic">A Blog for Article; Chinese Blog is www.cnblogs.com/narule</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/narule" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/no_twitter" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['narule','163.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Java IO</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Java IO</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 23, 2019, 8:10 PM +0800" > Jun 23, 2019 <i class="unloaded">2019-06-23T20:10:00+08:00</i> </span> by <span class="author"> Narule </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 17, 2021, 3:12 AM +0800" > Jan 17, 2021 <i class="unloaded">2021-01-17T03:12:22+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="846 words">4 min</span></div></div><div class="post-content"><h1 id="java-io">Java IO</h1><blockquote><p>IO: Input And Output</p></blockquote><p>java 中有IO，即输入与输出，<strong>输入input 输出output</strong></p><p>java 有典型的IO与NIO，常说的IO指典型IO, 阻塞IO， NIO表示非阻塞IO</p><p>阻塞： 等待IO任务完成才能继续下一步的操作</p><p>非阻塞： 暂不能清晰描述，可以查看网址文章链接：<a href="http://ifeve.com/overview/">http://ifeve.com/overview/</a></p><p>这里简单介绍Java中常见的文件读写’’</p><p>字节流读写文件：</p><h3 id="读文件">读文件</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filePath</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"file is not exist"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="nc">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span> <span class="c1">//创建文件输入流</span>
			<span class="kt">byte</span><span class="o">[]</span> <span class="n">read</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">fileInputStream</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">read</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"read content:"</span> <span class="o">+</span> <span class="n">read</span><span class="o">);</span>
			<span class="o">}</span>
			<span class="n">fileInputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">// 关闭流 释放资源</span>
		<span class="o">}</span>

	<span class="o">}</span>
</pre></table></code></div></div><h3 id="写文件">写文件</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeFile</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">content</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"D:\\Jser\\data\\test\\writeFile.xml"</span><span class="o">);</span> <span class="c1">//获取写文件的位置</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span>
			<span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
		<span class="nc">FileOutputStream</span> <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span> <span class="c1">//创建文件输出流</span>
		<span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">content</span><span class="o">);</span> <span class="c1">// content 表示写入文件的内容 </span>
		<span class="n">fileOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>	<span class="c1">//关闭流 释放资源</span>
	<span class="o">}</span>
</pre></table></code></div></div><h3 id="拷贝文件">拷贝文件</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.RandomAccessFile</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.ByteBuffer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.channels.FileChannel</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestIO</span> <span class="o">{</span>
    
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">String</span> <span class="n">originFilePath</span> <span class="o">=</span> <span class="s">"D:\\Jser\\data\\git-rep\\jdp\\note\\Program-StudyPlan.md"</span><span class="o">;</span>
		<span class="nc">String</span> <span class="n">aimFilePath</span> <span class="o">=</span> <span class="s">"D:\\Jser\\data\\test\\aimFile.md"</span><span class="o">;</span>
		<span class="n">copyFile</span><span class="o">(</span><span class="n">originFilePath</span><span class="o">,</span> <span class="n">aimFilePath</span><span class="o">);</span>
<span class="c1">//		testRandonAccessFile();</span>
	<span class="o">}</span>    
	
	<span class="cm">/*
	 * 读文件
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filePath</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"file is not exist"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="nc">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
			<span class="kt">byte</span><span class="o">[]</span> <span class="n">read</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">fileInputStream</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">read</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"read content:"</span> <span class="o">+</span> <span class="n">read</span><span class="o">);</span>
			<span class="o">}</span>
			<span class="n">fileInputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="o">}</span>

	<span class="o">}</span>
	
	<span class="cm">/**
	 * 写文件
	 * @throws IOException
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeFile</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">content</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"D:\\Jser\\data\\test\\writeFile.xml"</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span>
			<span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
		<span class="nc">FileOutputStream</span> <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
		<span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
		<span class="n">fileOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
	<span class="o">}</span>
    
	<span class="cm">/*
	 * 文件复制 -&gt; 读取一个文件复制到另一个地方
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">copyFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">originFilePath</span><span class="o">,</span> <span class="nc">String</span> <span class="n">aimPath</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">originFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">originFilePath</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">originFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"file is not exists!"</span><span class="o">);</span>
			<span class="k">return</span><span class="o">;</span>   <span class="c1">//文件不存在</span>
		<span class="o">}</span>
		<span class="nc">File</span> <span class="n">aimFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">aimPath</span><span class="o">);</span>
		<span class="nc">FileInputStream</span> <span class="n">fi</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="nc">FileOutputStream</span> <span class="n">fo</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="kt">byte</span><span class="o">[]</span> <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>   <span class="c1">//每次读文件内容的字节数组</span>
			<span class="k">if</span> <span class="o">(!</span><span class="n">aimFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span>
				<span class="n">aimFile</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
            <span class="c1">// 通过路径转化为 输入流 和 输出流</span>
			<span class="n">fi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">originFile</span><span class="o">);</span>  <span class="c1">//输入流</span>
			<span class="n">fo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">aimFile</span><span class="o">);</span>	<span class="c1">//输出流</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">fi</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">content</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//输入流将数据读取到字节数组，如果返回值为 -1 表示文件已经读完</span>
				<span class="n">fo</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">content</span><span class="o">);</span> <span class="c1">//输出流将数组内容写入文件</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"read file exception!"</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="c1">// close resources;</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">fo</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
					<span class="n">fo</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">fi</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
					<span class="n">fi</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">es</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">es</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">fo</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
					<span class="n">fo</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">fi</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
					<span class="n">fi</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
    
    <span class="cm">/*
    * java 涉及NIO的 RandomAccessFile 类
    */</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testRandonAccessFile</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="nc">RandomAccessFile</span> <span class="n">aFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RandomAccessFile</span><span class="o">(</span><span class="s">"D:\\Jser\\data\\git-rep\\config\\maven\\settings.xml"</span><span class="o">,</span> <span class="s">"rw"</span><span class="o">);</span>
		<span class="nc">FileChannel</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">aFile</span><span class="o">.</span><span class="na">getChannel</span><span class="o">();</span>
		<span class="nc">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"D:\\Jser\\data\\test\\creatFile.xml"</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">exists</span><span class="o">())</span>
			<span class="n">file</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">mkdirs</span><span class="o">();</span>

		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"file is not exist!"</span><span class="o">);</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span>
			<span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>

		<span class="nc">FileOutputStream</span> <span class="n">newFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
		<span class="nc">ByteBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="nc">ByteBuffer</span><span class="o">.</span><span class="na">allocate</span><span class="o">(</span><span class="mi">1024</span><span class="o">);</span>
		<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="k">while</span> <span class="o">(</span><span class="n">channel</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">i</span><span class="o">++;</span>
			<span class="n">buffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">buffer</span><span class="o">.</span><span class="na">hasRemaining</span><span class="o">())</span> <span class="o">{</span>
				<span class="n">newFile</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
			<span class="o">}</span>
			<span class="n">buffer</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="n">aFile</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="n">newFile</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"文件读取次数："</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technology-%E6%8A%80%E6%9C%AF/'>Technology^技术</a>, <a href='/categories/java/'>Java</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/writing/" class="post-tag no-text-decoration" >writing</a> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Java IO - Narule&url=https://narule.github.io/posts/IO/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Java IO - Narule&u=https://narule.github.io/posts/IO/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Java IO - Narule&url=https://narule.github.io/posts/IO/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E4%BA%92%E8%81%94%E7%BD%91%E5%A4%87%E5%BF%98%E5%BD%95/">互联网备忘录</a><li><a href="/posts/%E7%94%A8%E6%88%B7%E6%8C%87%E7%BA%B9/">用户指纹</a><li><a href="/posts/%E5%85%B3%E4%BA%8Enetty/">关于netty</a><li><a href="/posts/%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%AE%BE%E8%AE%A1-The-design-of-an-automatically-updated-blog/">The design of an automatically updated blog | 自动更新博客的设计</a><li><a href="/posts/AbstractQueuedSynchronizer%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E9%98%BB%E5%A1%9E%E9%94%81/">AbstractQueuedSynchronizer抽象类-阻塞锁</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/think/">Think</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/website/">website</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/map/">map</a> <a class="post-tag" href="/tags/nginx/">nginx</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/AbstractQueuedSynchronizer%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E9%98%BB%E5%A1%9E%E9%94%81/"><div class="card-body"> <span class="timeago small" > Mar 20, 2021 <i class="unloaded">2021-03-20T00:10:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AbstractQueuedSynchronizer抽象类-阻塞锁</h3><div class="text-muted small"><p> AbstractQueuedSynchronizer抽象类-阻塞锁 AbstractQueuedSynchronizer是多线程情况下保证代码快有序运行的一种设计，对多线程获取锁进行了抽象， 设计中包括： 1.线程队列（阻塞的线程） 当很多线程竞争锁的时候，排队一个个获取锁，先进先出 2.线程获取锁，成功就执行后面的代码 3.线程释放锁，如果等待队列中有线程，唤醒队列中的线程 ...</p></div></div></a></div><div class="card"> <a href="/posts/%E5%85%B3%E4%BA%8Enetty/"><div class="card-body"> <span class="timeago small" > Jul 11, 2021 <i class="unloaded">2021-07-11T00:20:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>关于netty</h3><div class="text-muted small"><p> 关于netty netty 是一个非阻塞IO框架，用于Java网络应用开发，特点是异步处理，并发处理能力，netty里面包含有reactor框架的实现，是一个非常高级的框架体系。 netty特性 netty 处理快，更少的资源需求，响应快，可以作为高并发场景服务器的一个选择 reactor 个人理解是 react：响应式， or ：对象，就是响应式框架，netty 就是运用react...</p></div></div></a></div><div class="card"> <a href="/posts/Java-jvm%E8%B0%83%E4%BC%98%E6%96%87%E6%A1%A3%E6%91%98%E8%A6%81/"><div class="card-body"> <span class="timeago small" > Sep 26, 2021 <i class="unloaded">2021-09-26T00:10:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java-jvm调优文档摘要</h3><div class="text-muted small"><p> Java-jvm调优文档摘要 官方文档：https://docs.oracle.com/en/java/javase/16/gctuning/factors-affecting-garbage-collection-performance.html 关于官方文档的理解，jdk版本不同参数略有区别，特别是jdk1.8之后的改动，取消了永久代这个区域，1.8没有ZGC垃圾回收器，但jdk16...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/java%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E9%97%AE%E9%A2%98,==%E4%B8%8Eequals%E7%9A%84%E5%8C%BA%E5%88%AB/" class="btn btn-outline-primary"><p>==与equals区别</p></a> <a href="/posts/Oracle/" class="btn btn-outline-primary"><p>Oracle</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://narule.github.io/posts/IO/'; this.page.identifier = '/posts/IO/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://cnblogs.com/narule">narule</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/think/">Think</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/website/">website</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/map/">map</a> <a class="post-tag" href="/tags/nginx/">nginx</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://narule.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
